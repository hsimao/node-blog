<% extend('../layout/dashboard-layout.ejs') %>

<div class="row justify-content-center">
  <div class="col-md-6">
    <div class="btn-group w-100">
      <a href="#" class="btn btn-outline-secondary w-100 rounded-0 active">已發佈</a>
      <a href="#" class="btn btn-outline-secondary w-100 rounded-0 ">草稿</a>
      <a href="article.html" class="btn btn-primary">新增文章</a>
    </div>
    <% for (item in articles) { %>
    <div class="card my-3">
      <h4 class="card-header">
        <%= articles[item].title %>
      </h4>
      <div class="card-body">
        <!-- 使用stringtags來設定內容僅顯示150字 -->
        <%- stringtags(articles[item].content).slice(0, 150) %>...
        <div>
          <span class="fa fa-clock-o"></span>
          <!-- 使用moment來格式化時間戳 -->
          <%= moment(articles[item].updateTime * 1000).format('YYYY/MM/DD') %>,
          <span class="fa fa-folder-open-o"></span>

          <!-- 核對該篇文章種類，顯示對應分類名稱 -->
          <% if (articles[item].category){ %>
          <% let type = null %>
          <% for (itemVal in categories) {
            if (categories[itemVal].id === articles[item].category) {
              type = categories[itemVal].name
            }} %>
          <%= type %>
          <% }else{ %>
          <span>沒有分類</span>
          <% } %>

        </div>
      </div>
      <div class="card-footer p-0 btn-group">
        <a href="#" class="btn btn-outline-danger rounded-0 deletePost" data-id="-L1zrsyiWCAbMQ5x8Plk" data-title="補充課程：Sass 與 includePaths">刪除</a>
        <a href="#" class="btn btn-outline-secondary w-100 rounded-0">編輯</a>
        <a href="#" target="_blank" class="btn btn-outline-secondary w-100 rounded-0">預覽</a>
      </div>
    </div>
    <% } %>

  </div>
</div>

<nav class="my-5" aria-label="Page navigation example">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled">
      <a class="page-link" href="/dashboard/archives" tabindex="-1">Previous</a>
    </li>

    <li class="page-item active">
      <a class="page-link" href="/dashboard/archives">1</a>
    </li>

    <li class="page-item ">
      <a class="page-link" href="/dashboard/archives">2</a>
    </li>

    <li class="page-item ">
      <a class="page-link" href="/dashboard/archives">Next</a>
    </li>
  </ul>
</nav>